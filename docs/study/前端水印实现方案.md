# 前端水印实现方案

## 原理

- js方法
- 配置水印内容，一般为登录系统后的账号
- 配置是否展示水印，一般通过配置路由meta实现

## js方法

水印功能模块，一般放在`src/utils`目录下

::: details watermark.js

@[code js](@src/components/watermark/watermark.js)

:::


## 配置水印内容

登录系统后，根据账号配置获取是否展示水印，如需展示，则缓存中新增水印内容为账号信息

```js
localStorage.setItem('watermark', '账号信息示例')
```

## 配置水印

路由信息`meta`中增加水印参数`watermark`

```js
// 需要展示水印的路由页面
{
  path: '/watermark',
  component: () => import(/* webpackChunkName: "demo" */ './watermark.vue'),
  meta: {
    title: '展示水印',
    watermark: true,
  }
},
```

全局路由增加判断

main.js

```js
import { setWatermark, removeWatermark } from '@/utils/watermark'

router.beforeEach((to, from, next) => {
  const watermarkInfo = localStorage.getItem('watermark')
  if (watermarkInfo && to.meta && to.meta.watermark) {
    setWatermark(watermarkInfo, '-100px', '150px', 180, 100)
  } else {
    removeWatermark()
  }
  next()
})
```

## 效果展示

![水印实现](./watermark.png)
