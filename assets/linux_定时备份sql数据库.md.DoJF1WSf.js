import{_ as a,c as n,a2 as l,o as p}from"./chunks/framework.CaQJM1GN.js";const u=JSON.parse('{"title":"定时备份sql数据库","description":"","frontmatter":{},"headers":[],"relativePath":"linux/定时备份sql数据库.md","filePath":"linux/定时备份sql数据库.md"}'),e={name:"linux/定时备份sql数据库.md"};function o(r,s,c,t,i,d){return p(),n("div",null,s[0]||(s[0]=[l(`<h1 id="定时备份sql数据库" tabindex="-1">定时备份sql数据库 <a class="header-anchor" href="#定时备份sql数据库" aria-label="Permalink to &quot;定时备份sql数据库&quot;">​</a></h1><h2 id="crontab" tabindex="-1">crontab <a class="header-anchor" href="#crontab" aria-label="Permalink to &quot;crontab&quot;">​</a></h2><p>使用crontab，实现每天定时备份数据库</p><p>时间表达式</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>* * * * *</span></span>
<span class="line"><span>- - - - -</span></span>
<span class="line"><span>| | | | |</span></span>
<span class="line"><span>| | | | +---- 星期中日期值（0-7，星期日可以是0或7）</span></span>
<span class="line"><span>| | | +------ 月份（1-12）</span></span>
<span class="line"><span>| | +-------- 一个月中的日期（1-31）</span></span>
<span class="line"><span>| +---------- 小时（0-23）</span></span>
<span class="line"><span>+------------ 分钟（0-59）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="备份sql" tabindex="-1">备份sql <a class="header-anchor" href="#备份sql" aria-label="Permalink to &quot;备份sql&quot;">​</a></h2><p>backup.sh</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">TIME</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">$(</span><span style="color:#61AFEF;">date</span><span style="color:#98C379;"> +%Y%m%d%H%M%S</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">DBUSER</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;DBUSER&#39;</span></span>
<span class="line"><span style="color:#E06C75;">DBPASSWORD</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;DBPASSWORD&#39;</span></span>
<span class="line"><span style="color:#E06C75;">DBNAME</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;DBNAME&#39;</span></span>
<span class="line"><span style="color:#E06C75;">PATH</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;/PATH/&#39;</span></span>
<span class="line"><span style="color:#E06C75;">FILE</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">$PATH$TIME$DBNAME</span><span style="color:#98C379;">&#39;.sql&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">mysqldump</span><span style="color:#D19A66;"> -u</span><span style="color:#E06C75;">$DBUSER</span><span style="color:#D19A66;"> -p</span><span style="color:#E06C75;">$DBPASSWORD</span><span style="color:#E06C75;"> $DBNAME</span><span style="color:#ABB2BF;"> &gt; </span><span style="color:#E06C75;">$FILE</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="增加定时任务" tabindex="-1">增加定时任务 <a class="header-anchor" href="#增加定时任务" aria-label="Permalink to &quot;增加定时任务&quot;">​</a></h2><p>编辑文件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">crontab</span><span style="color:#D19A66;"> -e</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>输入后保存,每天凌晨1点执行脚本</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">0</span><span style="color:#D19A66;"> 1</span><span style="color:#E5C07B;"> *</span><span style="color:#E5C07B;"> *</span><span style="color:#E5C07B;"> *</span><span style="color:#98C379;"> /path/backup.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>确认添加成功</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">crontab</span><span style="color:#D19A66;"> -l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="设置权限" tabindex="-1">设置权限 <a class="header-anchor" href="#设置权限" aria-label="Permalink to &quot;设置权限&quot;">​</a></h2><p>确保脚本具有执行权限</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">chmod</span><span style="color:#98C379;"> +x</span><span style="color:#98C379;"> /path/backup.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,18)]))}const m=a(e,[["render",o]]);export{u as __pageData,m as default};
