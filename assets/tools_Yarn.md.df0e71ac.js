import{_ as s,c as n,o as a,X as l}from"./chunks/framework.65f621ee.js";const m=JSON.parse('{"title":"Yarn","description":"","frontmatter":{},"headers":[],"relativePath":"tools/Yarn.md","filePath":"tools/Yarn.md"}'),e={name:"tools/Yarn.md"},p=l(`<h1 id="yarn" tabindex="-1">Yarn <a class="header-anchor" href="#yarn" aria-label="Permalink to &quot;Yarn&quot;">​</a></h1><p>安装前，肯定需要已安装Node.js，建议使用v16以上</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><ul><li>它的能力和npm相仿，然后，它还是用npm装的</li><li>个人觉得它装的快一点，占位小一点，原理就不说了，用就完了</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yarn</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="v1升级到v2" tabindex="-1">v1升级到v2 <a class="header-anchor" href="#v1升级到v2" aria-label="Permalink to &quot;v1升级到v2&quot;">​</a></h2><ul><li><a href="https://yarnpkg.com/getting-started/migration" target="_blank" rel="noreferrer">官方升级文档</a></li><li><a href="https://yarnpkg.com/configuration/yarnrc" target="_blank" rel="noreferrer">完整配置文档</a></li></ul><p><em>摘录最关键的步骤</em></p><ul><li>Run npm install -g yarn to update the global yarn version to latest v1 <ul><li>执行命令<code>npm install -g yarn</code>安装yarn最新的v1版本</li></ul></li><li>Go into your project directory <ul><li>进入项目目录</li></ul></li><li>Run yarn set version berry to enable v2 (cf Install for more details) <ul><li>执行命令<code>yarn set version berry</code>设置启用v2版本(然后你会发现最新版本是v3...)</li></ul></li><li>If you used .npmrc or .yarnrc, you&#39;ll need to turn them into the new format (see also 1, 2) <ul><li>如果项目中使用了.npmrc 或者 .yarnrc，需要修改配置为新的格式(具体参数名见配置文档)</li></ul></li><li>Run yarn config set nodeLinker node-modules <ul><li>执行命令<code>yarn config set nodeLinker node-modules</code>(字面意思，建立关系，看起来好像可以用其他目录)</li></ul></li><li>Commit the changes so far (yarn-X.Y.Z.js, .yarnrc.yml, ...) <ul><li>根据yarn配置文档增加设置</li></ul></li><li>Run yarn install to migrate the lockfile <ul><li>执行命令<code>yarn install</code>升级原来的<code>yarn.lock</code>文件</li></ul></li></ul><p>还需要在.gitignore中增加忽略文件</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">.pnp.*</span></span>
<span class="line"><span style="color:#A6ACCD;">.yarn/*</span></span>
<span class="line"><span style="color:#A6ACCD;">!.yarn/patches</span></span>
<span class="line"><span style="color:#A6ACCD;">!.yarn/plugins</span></span>
<span class="line"><span style="color:#A6ACCD;">!.yarn/releases</span></span>
<span class="line"><span style="color:#A6ACCD;">!.yarn/sdks</span></span>
<span class="line"><span style="color:#A6ACCD;">!.yarn/versions</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="举例" tabindex="-1">举例 <a class="header-anchor" href="#举例" aria-label="Permalink to &quot;举例&quot;">​</a></h3><p>因众所周知的问题，默认的安装镜像地址建议是修改为淘宝源，v1版本的yarn可以直接读取.npmrc文件实现源切换</p><p>.npmrc</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">registry = https://registry.npm.taobao.org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>升级后文件名改了，配置名也改了</p><p>.yarnrc.yml</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nodeLinker: node-modules</span></span>
<span class="line"><span style="color:#A6ACCD;">npmRegistryServer: https://registry.npm.taobao.org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="常用命令" tabindex="-1">常用命令 <a class="header-anchor" href="#常用命令" aria-label="Permalink to &quot;常用命令&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 初始化</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装所有依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装依赖包(以vue为例)</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装仅开发开发依赖(以vue为例)</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vue</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 升级依赖包(以vue为例)</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 删除依赖包(以vue为例)</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 更新yarn自身</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查询设置(以npmRegistryServer为例)</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npmRegistryServer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div>`,20),r=[p];function o(t,i,c,y,u,b){return a(),n("div",null,r)}const C=s(e,[["render",o]]);export{m as __pageData,C as default};
