import{_ as e,c as n,a2 as s,o as l}from"./chunks/framework.BPuE4Feg.js";const u=JSON.parse('{"title":"Crontab命令","description":"","frontmatter":{},"headers":[],"relativePath":"linux/Crontab命令.md","filePath":"linux/Crontab命令.md"}'),t={name:"linux/Crontab命令.md"};function o(r,a,c,i,p,d){return l(),n("div",null,a[0]||(a[0]=[s(`<h1 id="crontab命令" tabindex="-1">Crontab命令 <a class="header-anchor" href="#crontab命令" aria-label="Permalink to &quot;Crontab命令&quot;">​</a></h1><p>定时任务</p><h2 id="首次使用" tabindex="-1">首次使用 <a class="header-anchor" href="#首次使用" aria-label="Permalink to &quot;首次使用&quot;">​</a></h2><p>查询定时任务列表报错</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">crontab</span><span style="color:#D19A66;"> -l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>crontab: no crontab for root</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">crontab</span><span style="color:#D19A66;"> -e</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>按ESC退出，输入<code>wq</code>回车，会生成文件，再次执行<code>crontab -l</code>就正常了</p><h2 id="添加任务" tabindex="-1">添加任务 <a class="header-anchor" href="#添加任务" aria-label="Permalink to &quot;添加任务&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">crontab</span><span style="color:#D19A66;"> -e</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>insert切换到输入模式</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>*/1 * * * * /path/test.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>保存并退出，控制台提示<code>crontab: installing new crontab</code></p><h2 id="常见命令" tabindex="-1">常见命令 <a class="header-anchor" href="#常见命令" aria-label="Permalink to &quot;常见命令&quot;">​</a></h2><ul><li>查看任务crontab -l</li><li>编辑任务crontab -e</li><li>清空任务crontab -r</li><li>恢复任务crontab file</li></ul><h2 id="日志" tabindex="-1">日志 <a class="header-anchor" href="#日志" aria-label="Permalink to &quot;日志&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 不输出内容</span></span>
<span class="line"><span style="color:#ABB2BF;">*/1 * * * * /path/XXXX.sh &amp;&gt; /dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 将正确和错误日志都输出到 /tmp/load.log</span></span>
<span class="line"><span style="color:#ABB2BF;">*/1 * * * * /root/XXXX.sh &gt; /tmp/load.log 2&gt;&amp;1 &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 只输出正确日志到 /tmp/load.log</span></span>
<span class="line"><span style="color:#ABB2BF;">*/1 * * * * /root/XXXX.sh &gt; /tmp/load.log &amp;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 等同于</span></span>
<span class="line"><span style="color:#ABB2BF;">*/1 * * * * /root/XXXX.sh 1&gt;/tmp/load.log &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 只输出错误日志到 /tmp/load.log</span></span>
<span class="line"><span style="color:#ABB2BF;">*/1 * * * * /root/XXXX.sh 2&gt; /tmp/load.log &amp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="时间表达式" tabindex="-1">时间表达式 <a class="header-anchor" href="#时间表达式" aria-label="Permalink to &quot;时间表达式&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:center;">*</th><th style="text-align:center;">*</th><th style="text-align:center;">*</th><th style="text-align:center;">*</th><th style="text-align:center;">*</th><th style="text-align:center;">command</th></tr></thead><tbody><tr><td style="text-align:center;">分</td><td style="text-align:center;">时</td><td style="text-align:center;">日</td><td style="text-align:center;">月</td><td style="text-align:center;">周</td><td style="text-align:center;">命令</td></tr><tr><td style="text-align:center;">0-59</td><td style="text-align:center;">0-23</td><td style="text-align:center;">1-31</td><td style="text-align:center;">1-12</td><td style="text-align:center;">0-7</td><td style="text-align:center;">命令</td></tr></tbody></table><ul><li><code>*</code>代表取值范围内的所有数字，如在分钟单位，则表示每分钟执行一次，其它时间点同理。第3段上的<code>*</code>代表[01-31]日，第4段上的<code>*</code>代表[01-12]月；</li><li><code>,</code>用于列举多个数字，如 <code>1,3,5</code> 指定<code>1，3，5</code>这三个时间点；</li><li><code>-</code>用于确定时间区间，如 <code>2-6</code> 等价于 <code>2,3,4,5,6</code>；</li><li><code>/</code>代表每的意思,<code>*/5</code>表示每5个单位，如在分钟位置设置 <code>*/2</code>表示每两分钟执行一次</li></ul><h2 id="查看邮件" tabindex="-1">查看邮件 <a class="header-anchor" href="#查看邮件" aria-label="Permalink to &quot;查看邮件&quot;">​</a></h2><p>定时任务执行后都会发送一封邮件</p><ul><li>登录邮件工具<code>mail</code></li><li>查看指定邮件,直接输入序号，如<code>1</code></li><li>删除指定邮件,<code>d 1</code>或者<code>d 1-10</code></li><li>查看邮件列表,<code>h</code></li><li>退出邮件工具<code>q</code></li></ul>`,23)]))}const h=e(t,[["render",o]]);export{u as __pageData,h as default};
