import{d as h,h as u,j as F,o as n,c as l,k as i,e as d,t as D,_ as k,C as x,H as _,w as V,Q as b}from"./chunks/framework.77441a25.js";const E={class:"imgContent"},q={class:"img-container"},I=["src"],P={key:2,class:"plus"},$={class:"tip"},w=h({__name:"uploadImg",props:{modelValue:{},tip:{},max:{}},emits:["update:modelValue"],setup(B,{emit:t}){const o=B,e=t,s=u(""),p=u(!1),f="image/jpg,image/jpeg,image/png,image/gif".split(",");function v(r){const a=r.target.files[0];if(!a)return;const{size:m,name:y,type:C}=a;if(m>(o.max||500)*1024){console.warn("文件大小",`${m/1024}k`),alert(`文件尺寸不得超过${o.max||500}k, '${y}' 不符合要求`),c();return}if(a&&f.includes(C)){const g=new FileReader;s.value="",p.value=!0,g.readAsDataURL(a),g.onloadend=A=>{e("update:modelValue",a),s.value=A.target.result,p.value=!1}}else alert(`文件仅支持图片格式, '${y}' 不符合要求`),c();r.target.value=null}function c(){e("update:modelValue",""),s.value=""}return F(()=>{s.value=o.modelValue}),(r,a)=>(n(),l("div",E,[i("div",q,[s.value?(n(),l("img",{key:0,src:s.value,class:"img"},null,8,I)):d("",!0),i("input",{type:"file",accept:"image/*",ref:"file",onChange:v,title:""},null,544),s.value?(n(),l("i",{key:1,class:"remove",onClick:c},"×")):d("",!0),s.value?d("",!0):(n(),l("i",P,"+"))]),i("div",$,D(r.tip||"仅支持jpg,png,gif文件"),1)]))}});const j=k(w,[["__scopeId","data-v-84f7b12e"]]),N=b('<h1 id="图片上传" tabindex="-1">图片上传 <a class="header-anchor" href="#图片上传" aria-label="Permalink to &quot;图片上传&quot;">​</a></h1><h2 id="demo" tabindex="-1">Demo <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;Demo&quot;">​</a></h2><p>使用<code>FileReader</code>方法，选择图片后读取到<code>base64</code>格式的图片信息，通过赋值给<code>img</code>的<code>src</code>实现图片预览</p>',3),O=b(`<div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">uploadImg</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;imgurl&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">uploadImg</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uploadImg</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./uploadImg/uploadImg.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">imgurl</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-label="Permalink to &quot;Props&quot;">​</a></h2><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>v-model</td><td>any</td><td>图片路径或对象</td></tr><tr><td>max</td><td>number</td><td>图片大小限制，默认500k</td></tr><tr><td>tip</td><td>string</td><td>仅支持jpg,png,gif文件</td></tr></tbody></table>`,3),M=JSON.parse('{"title":"图片上传","description":"","frontmatter":{},"headers":[],"relativePath":"components/图片上传.md","filePath":"components/图片上传.md"}'),R={name:"components/图片上传.md"},U=h({...R,setup(B){const t=u("");return(o,e)=>{const s=x("ClientOnly");return n(),l("div",null,[N,_(s,null,{default:V(()=>[_(j,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=p=>t.value=p)},null,8,["modelValue"])]),_:1}),O])}}});export{M as __pageData,U as default};
