import{_ as a,c as n,a2 as l,o as p}from"./chunks/framework.BPuE4Feg.js";const b=JSON.parse('{"title":"PM2","description":"","frontmatter":{},"headers":[],"relativePath":"tools/PM2.md","filePath":"tools/PM2.md"}'),e={name:"tools/PM2.md"};function o(r,s,c,t,i,d){return p(),n("div",null,s[0]||(s[0]=[l(`<h1 id="pm2" tabindex="-1">PM2 <a class="header-anchor" href="#pm2" aria-label="Permalink to &quot;PM2&quot;">​</a></h1><p>Node.js进程管理工具</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p>全局安装，保证<code>pm2</code>命令全局可用</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npm</span><span style="color:#98C379;"> i</span><span style="color:#98C379;"> pm2</span><span style="color:#D19A66;"> -g</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="常用命令" tabindex="-1">常用命令 <a class="header-anchor" href="#常用命令" aria-label="Permalink to &quot;常用命令&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 启动服务</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> app.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 查看列表</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> ls</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 停止/启动/重启</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> stop</span><span style="color:#98C379;"> id</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">namespace</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">all</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> id</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">namespace</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">all</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> restart</span><span style="color:#98C379;"> id</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">namespace</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 停止并删除进程</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> delete</span><span style="color:#98C379;"> id</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">namespace</span><span style="color:#ABB2BF;">|</span><span style="color:#61AFEF;">all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 杀死进程</span></span>
<span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> kill</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to &quot;配置文件&quot;">​</a></h2><p>创建配置文件</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>自动生成文件<code>ecosystem.config.js</code>,可手动生成</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  apps</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#E06C75;">      name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;apis&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      script</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;./index.js&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      watch</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 文件更新后自动重启</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>通过配置文件启动</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> ecosystem.config.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,14)]))}const m=a(e,[["render",o]]);export{b as __pageData,m as default};
